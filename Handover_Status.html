<script>
    const dataUrl = 'https://raw.githubusercontent.com/t931540101-lang/My-Tech-Notes/main/handover_data.json';

    async function refreshData() {
        try {
            // 從 GitHub 抓取最新的 JSON 檔案
            const response = await fetch(dataUrl + '?t=' + new Date().getTime());
            const data = await response.json();
            
            document.getElementById('handoverText').innerText = data.text;
            document.getElementById('statusLevel').innerText = data.level;
            document.getElementById('syncTime').innerText = '最後同步：' + data.time;
            
            // 如果是「緊急」，標籤變紅色
            if(data.level.includes('緊急')) {
                document.getElementById('statusLevel').style.borderColor = '#ff4444';
                document.getElementById('statusLevel').style.color = '#ff4444';
            } else {
                document.getElementById('statusLevel').style.borderColor = '#ffcc00';
                document.getElementById('statusLevel').style.color = '#ffcc00';
            }
        } catch (error) {
            console.log('同步失敗，使用快取資料');
        }
    }
    
    // 每 60 秒抓一次雲端資料
    setInterval(refreshData, 60000);
    refreshData();
</script>
