<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M-Police å‹¤å‹™ç³»çµ±</title>
    <style>
        :root { --p-blue: #1a5c9f; --p-dark: #333; --p-light: #e3f2fd; --p-danger: #d9534f; }
        body { margin: 0; font-family: sans-serif; background: #f0f0f0; padding-bottom: 80px; }
        .header { background: var(--p-blue); color: white; padding: 15px; text-align: center; font-size: 1.2rem; font-weight: bold; position: sticky; top: 0; z-index: 100; }
        .section-title { background: var(--p-dark); color: white; padding: 10px 15px; font-size: 0.9rem; }
        .page { display: none; padding: 15px; background: white; min-height: 85vh; }
        .form-group { margin-bottom: 18px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: var(--p-blue); }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .btn-submit { background: var(--p-blue); color: white; border: none; width: 100%; padding: 16px; font-size: 1.1rem; border-radius: 5px; cursor: pointer; font-weight: bold; }
        
        /* ç™»å…¥é é¢å°ˆå±¬ */
        #loginPage { display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; background: var(--p-blue); color: white; padding: 20px; box-sizing: border-box; }
        .login-box { background: white; padding: 30px; border-radius: 10px; width: 100%; max-width: 300px; color: #333; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .menu-item { background: var(--p-light); border-bottom: 1px solid #ccc; padding: 20px; text-align: center; color: #333; text-decoration: none; display: block; font-weight: 600; cursor: pointer; }
        .footer { position: fixed; bottom: 0; width: 100%; background: var(--p-blue); display: none; box-shadow: 0 -2px 10px rgba(0,0,0,0.2); }
        .nav-item { flex: 1; color: white; padding: 15px 5px; text-align: center; font-size: 0.85rem; cursor: pointer; border-right: 1px solid rgba(255,255,255,0.2); }
    </style>
</head>
<body>

<div id="loginPage">
    <div style="margin-bottom: 20px; font-size: 1.5rem; font-weight: bold;">M-Police å‹¤å‹™ç™»å…¥</div>
    <div class="login-box">
        <div class="form-group">
            <label>å¸³è™Ÿ (å§“å)</label>
            <input type="text" id="loginUser" placeholder="è«‹è¼¸å…¥å§“å">
        </div>
        <div class="form-group">
            <label>å¯†ç¢¼ (å·¥è™Ÿ)</label>
            <input type="password" id="loginPass" placeholder="è«‹è¼¸å…¥å·¥è™Ÿ">
        </div>
        <button class="btn-submit" style="width:100%" onclick="checkLogin()">æˆæ¬Šç™»å…¥</button>
    </div>
    <div style="margin-top: 20px; font-size: 0.8rem; opacity: 0.8;">å…§éƒ¨ç³»çµ±ï¼Œåš´ç¦æœªæˆæ¬Šå­˜å–</div>
</div>

<div id="appContent" style="display:none;">
    <div class="header" id="pageTitle">è­¦å¯Ÿ SOP æŸ¥è©¢ APP</div>

    <div id="mainMenu">
        <div class="section-title">æ¥­å‹™åˆ†é¡æŸ¥è©¢</div>
        <div class="menu-item" onclick="showPage('transport', 'äº¤é€šé¡ - å‹¤å‹™ç™»è¨˜')">äº¤é€šé¡</div>
        <div class="menu-item" onclick="showPage('security', 'ä¿å®‰é¡ - å·¡é‚ç´€éŒ„')">ä¿å®‰é¡</div>
        <div class="menu-item" onclick="showPage('admin', 'è¡Œæ”¿é¡ - å…¬å‹™è³‡è¨Š')">è¡Œæ”¿é¡</div>
        <div class="menu-item" onclick="showPage('it', 'å¾Œå‹¤é¡ - æŠ€è¡“ç¶­è­·')">å¾Œå‹¤é¡</div>
        <div class="menu-item" onclick="showPage('emergency', 'å‹¤å‹™æŒ‡æ® - ç·Šæ€¥æ‡‰è®Š')">å‹¤å‹™æŒ‡æ®</div>
    </div>

    <div id="page-transport" class="page">
        <label>è»Šç‰Œè™Ÿç¢¼</label><input type="text" id="carId" placeholder="ABC-1234">
        <button class="btn-submit" onclick="saveData('äº¤é€š')">æäº¤è³‡æ–™</button>
    </div>
    <div id="page-security" class="page">
        <label>å·¡é‚å€åŸŸ</label><select id="secArea"><option>å¤§é–€å£</option><option>å€‰åº«</option></select>
        <button class="btn-submit" onclick="saveData('ä¿å®‰')">å„²å­˜ç´€éŒ„</button>
    </div>
    <div id="page-admin" class="page">
        <label>ä¸Šç­æ™‚æ®µ</label><input type="text" value="07:00 ~ 19:00" readonly>
        <button class="btn-submit" onclick="saveData('è¡Œæ”¿')">å„²å­˜è¡Œæ”¿ç­†è¨˜</button>
    </div>
    <div id="page-it" class="page">
        <div style="background:#fff3cd; padding:10px; border-radius:5px; margin-bottom:15px; font-size:0.8rem;">
            ã€ä»»å‹™å­˜æª”ã€‘HP 15s 240G SSD è¨ˆç•«å·²é€€ä¼‘ã€‚
        </div>
        <button class="btn-submit" onclick="saveData('å¾Œå‹¤')">å„²å­˜æŠ€è¡“è³‡æ–™</button>
    </div>
    <div id="page-emergency" class="page">
        <label>äº‹ä»¶ç­‰ç´š</label><select id="emLvl"><option>ğŸ”´ ç·Šæ€¥</option><option>ğŸ”µ ä¸€èˆ¬</option></select>
        <button class="btn-submit" style="background:var(--p-danger);" onclick="saveData('ç·Šæ€¥é€šå ±')">ç™¼é€é€šå ±</button>
    </div>

    <div class="footer" id="mainFooter">
        <div class="nav-item" onclick="goHome()">æ¥­å‹™åˆ†é¡</div>
        <div class="nav-item" onclick="showLogs()">æ­·å²ç´€éŒ„</div>
        <div class="nav-item" onclick="logout()">ç™»å‡º</div>
    </div>
</div>

<script>
    // é è¨­å¸³å¯† (å°é»‘å“¥å¯æ ¹æ“šå¯¦éš›éœ€æ±‚ä¿®æ”¹)
    const VALID_USER = "å°é»‘å“¥"; // ä½ çš„åå­—
    const VALID_PASS = "1030701"; // ç¯„ä¾‹ï¼šä½ çš„é€²å…¬å¸æ—¥æœŸ(å·¥è™Ÿ)

    function checkLogin() {
        const u = document.getElementById('loginUser').value;
        const p = document.getElementById('loginPass').value;
        if(u === VALID_USER && p === VALID_PASS) {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('appContent').style.display = 'block';
            document.getElementById('mainFooter').style.display = 'flex';
        } else {
            alert('æˆæ¬Šå¤±æ•—ï¼šå¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ï¼');
        }
    }

    function logout() {
        location.reload(); // ç°¡å–®çš„ç™»å‡ºæ–¹å¼ï¼šé‡æ–°æ•´ç†é é¢
    }

    function showPage(pageId, title) {
        document.getElementById('mainMenu').style.display = 'none';
        document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
        document.getElementById('page-' + pageId).style.display = 'block';
        document.getElementById('pageTitle').innerText = title;
    }

    function goHome() {
        document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
        document.getElementById('mainMenu').style.display = 'block';
        document.getElementById('pageTitle').innerText = 'è­¦å¯Ÿ SOP æŸ¥è©¢ APP';
    }

    function saveData(category) {
        const timestamp = new Date().toLocaleString();
        let history = JSON.parse(localStorage.getItem('PoliceSystemLogs') || '[]');
        history.push({ cat: category, time: timestamp });
        localStorage.setItem('PoliceSystemLogs', JSON.stringify(history));
        alert('ç´€éŒ„æˆåŠŸï¼');
        goHome();
    }

    function showLogs() {
        let history = JSON.parse(localStorage.getItem('PoliceSystemLogs') || '[]');
        if(history.length === 0) return alert('å°šç„¡ç´€éŒ„');
        alert('æœ€è¿‘æ“ä½œï¼š' + history[history.length-1].cat + ' @ ' + history[history.length-1].time);
    }
</script>
</body>
</html>
